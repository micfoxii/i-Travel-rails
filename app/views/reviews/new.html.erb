<h1> New Review </h1>
<p>
<%= form_for :review, url: user_reviews_path do |f|%>
    
    <% if @city %>
        <%= f.hidden_field :city_id, value: @city.id %>
        <%= f.text_field :city, value: @city.name %>
    <% else %>
        <%= f.label :city, "Select a city:" %>
        <%= f.collection_select :city_id, City.order('name ASC'), :id, :city_state_country, :include_blank => true %>
    <p> OR create a new city below: </p>
        <%= f.fields_for :city_attributes do |city_attrib| %>
            <%= f.label :city, "City Name"%>
            <%= city_attrib.text_field :city, placeholder: "City Name" %><br><br>

            <% #Select or Create Country %>
            <%= f.label :country, "Select Country"%>
            <%= city_attrib.collection_select :country_id, Country.order('name ASC'), :id, :name, :include_blank => true %>
            <%= f.label :country, "OR add new country:" %>
            <%= city_attrib.text_field :country %>
            
            <% #TODO have states only show up if United States %>
                <%# <%= f.label :state, "Select State"%> %>
                <%# <%= city_attrib.grouped_collection_select :state_id, Country.order(:name), :states, :name, :id, :name, :include_blank => true %> %>
                <%# <%= f.label :state, "OR add a new state:"%> %>
                <%# <%= city_attrib.text_field :state %> %>
            <% end %>
        <% end %>

        <%= f.label :title %>
        <%= f.text_field :title %>

        <%= f.label :content %>
        <%= f.text_area :content %>

        <%= f.label :rating %>
        <%= f.select :rating, (1..5), :include_blank => true %>

    <%= f.submit %>
<% end %>

<%= "TODO Lodging, Restaurant, Attraction" %>

</p>